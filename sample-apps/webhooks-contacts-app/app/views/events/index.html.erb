<div class="container">
  <% if @error.present? %>
    <h3><%= @error.message %></h3>
  <% else %>
    <h3 id='alert-not-shown-events' class="hidden" datetime-mark=<%= DateTime.current %>>New webhooks are received. <a href="#">Reload</a> the page to see updates</h3>
    <% if @contacts.present? %>
      <table class="events">
        <thead>
          <tr>
            <th>Contact ID</th>
            <th>Contact Name</th>
            <th>Event</th>
            <th>Occurred At</th>
          </tr>
        </thead>
        <tbody>
          <% @events.each do |event| %>
            <tr>
              <td><%= event.object_id %></td>
              <td>
                <% if @contacts.keys.include? event.object_id %>
                  <%= @contacts[event.object_id][:name] %>
                <% end %>
              </td>
              <td>
                <span class="event <%= event.event_type.split('.')[0] %>"><%= event.event_type %></span>
              </td>
              <td>
                <%= event.occured_at %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
      <% else %>
        <h3 id="empty-message">Webhooks haven't been received yet.</h3>
      <% end %>
  <% end %>
</div>